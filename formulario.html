<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="formulario.css" />
    <title>Triagem - OpalEats</title>
    <link rel="manifest" href="LogoMarca/site.webmanifest" />
    <link rel="icon" href="LogoMarca/favicon.ico" type="image/x-icon" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="LogoMarca/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="LogoMarca/favicon-16x16.png"
    />
    <link rel="apple-touch-icon" href="LogoMarca/apple-touch-icon.png" />
  </head>

  <body>
    <header>
      <h1>Formul√°rio de Triagem Nutricional</h1>
    </header>

    <main>
      <form id="form-triagem" action="formula/planejamento.html" method="get">
        <!-- 1¬∫ Informa√ß√µes Pessoais -->
        <fieldset>
          <legend>Informa√ß√µes Pessoais</legend>
          <label for="nome">Nome:</label>
          <input type="text" id="nome" name="nome" required />

          <label for="idade">Idade:</label>
          <input type="number" id="idade" name="idade" min="1" required />

          <label for="sexo">Sexo:</label>
          <select id="sexo" name="sexo" aria-required="true" required>
            <option value="" disabled selected>Selecione</option>
            <option value="feminino">Feminino</option>
            <option value="masculino">Masculino</option>
          </select>

          <label for="peso">Peso atual (kg):</label>
          <input
            type="number"
            step="0.1"
            id="peso"
            name="peso"
            min="1"
            required
          />

          <label for="altura">Altura (cm):</label>
          <input
            type="number"
            step="1"
            id="altura"
            name="altura"
            min="50"
            required
          />
          <p
            id="altura-error"
            class="error-message"
            style="display: none; color: red"
          >
            S√≥ para confirmar: essa altura est√° em cent√≠metros? ü§î Use algo como
            170 cm, n√£o 1.70 m.
          </p>

          <label for="atividade">N√≠vel de Atividade F√≠sica:</label>
          <select id="atividade" name="atividade" aria-required="true" required>
            <option value="" disabled selected>Selecione</option>
            <option value="sedentario">Sedent√°rio</option>
            <option value="leve">Leve (1-2 dias/semana)</option>
            <option value="moderado">Moderado (3-4 dias/semana)</option>
            <option value="intenso">Intenso (5-7 dias/semana)</option>
            <option value="muito-intenso">
              Muito Intenso (7 dias/semana, 2x/dia)
            </option>
          </select>
        </fieldset>

        <!-- Percentual de Gordura -->
        <fieldset>
          <legend>Percentual de Gordura Corporal (Opcional)</legend>
          <label for="gordura">Digite um n√∫mero, se souber:</label>
          <input
            type="number"
            id="gordura"
            name="gordura"
            placeholder="Exemplo: 18 (sem o s√≠mbolo %)"
            aria-describedby="gordura-info"
            inputmode="numeric"
          />
          <p id="gordura-info">üîç N√£o tem certeza? Pode deixar em branco!</p>
        </fieldset>

        <!-- 2¬∫ Informa√ß√£o: Biotipo -->
        <section aria-describedby="biotipo-info">
          <h2>Selecione seu biotipo corporal</h2>
          <details>
            <summary>Saiba mais sobre biotipo corporal</summary>
            <div class="biotipo-details">
              <p id="biotipo-info">
                Embora o biotipo influencie caracter√≠sticas f√≠sicas e o
                metabolismo, ele <strong>n√£o define sozinho</strong> sua
                capacidade de emagrecer ou ganhar massa muscular. A gen√©tica
                pode contribuir com at√© 30% a 40% em condi√ß√µes como obesidade ou
                diabetes, mas o estilo de vida ‚Äî alimenta√ß√£o adequada, atividade
                f√≠sica e acompanhamento profissional ‚Äî tem papel ainda mais
                decisivo. Com um plano nutricional individualizado e disciplina,
                √© poss√≠vel alcan√ßar resultados expressivos
                <strong>independentemente do tipo corporal.</strong>
              </p>
              <p>
                Entender o seu biotipo pode ser √∫til para ajustar melhor os
                c√°lculos e estrat√©gias. Suas caracter√≠sticas ‚Äî como propor√ß√£o de
                gordura e massa magra ‚Äî ajudam a escolher a f√≥rmula mais
                adequada para estimar suas necessidades cal√≥ricas.
              </p>
            </div>
          </details>

          <h3>N√£o sabe seu biotipo? Descubra aqui:</h3>
          <p class="botao-container">
            <button
              type="button"
              class="link-info botao-info"
              data-modal="modal-teste-pulso"
            >
              Teste do Pulso
            </button>
          </p>
          <!-- Modal para Teste do Pulso -->
          <div
            class="modal-overlay"
            id="modal-teste-pulso"
            role="dialog"
            aria-hidden="true"
          >
            <div class="modal-content">
              <button
                type="button"
                class="modal-close"
                aria-label="Fechar modal"
              >
                x
              </button>
              <h4>Teste do Pulso</h4>
              <p>
                O m√©dico William Sheldon desenvolveu um m√©todo simples para
                ajudar a identificar seu biotipo corporal, indo al√©m da simples
                observa√ß√£o f√≠sica.
              </p>
              <p>
                Siga os passos abaixo para medir seu pulso e estimar seu
                biotipo:
              </p>
              <ol>
                <li>
                  Com a m√£o direita, envolva o pulso esquerdo com o polegar e o
                  dedo m√©dio.
                </li>
                <li>Observe o que acontece:</li>
                <ul>
                  <li>
                    Se os dedos se sobrep√µem facilmente:
                    <strong>Ectomorfo</strong> (ossos finos).
                  </li>
                  <li>
                    Se os dedos se tocam ou quase se tocam:
                    <strong>Mesomorfo</strong> (ossos m√©dios).
                  </li>
                  <li>
                    Se os dedos n√£o se encontram:
                    <strong>Endomorfo</strong> (ossos largos).
                  </li>
                </ul>
              </ol>
              <p>
                Use esse teste como uma refer√™ncia simples para confirmar seu
                biotipo.
              </p>
            </div>
          </div>

          <h3>Informe seu biotipo</h3>
          <p>Escolha abaixo a imagem que melhor representa seu biotipo:</p>

          <div class="biotipo-container">
            <label class="biotipo-option" data-biotipo="ectomorfo">
              <img
                src="imagens/ectomorfo.png"
                alt="Ectomorfo"
                width="150"
                height="200"
              />
              <input type="radio" name="biotipo" value="ectomorfo" required />
              <span>Ectomorfo</span>
            </label>
            <label class="biotipo-option" data-biotipo="endomorfo">
              <img
                src="imagens/endomorfo.png"
                alt="Endomorfo"
                width="150"
                height="200"
              />
              <input type="radio" name="biotipo" value="endomorfo" />
              <span>Endomorfo</span>
            </label>
            <label class="biotipo-option" data-biotipo="mesomorfo">
              <img
                src="imagens/mesomorfo.png"
                alt="Mesomorfo"
                width="150"
                height="200"
              />
              <input type="radio" name="biotipo" value="mesomorfo" />
              <span>Mesomorfo</span>
            </label>
          </div>
        </section>

        <!-- 3¬∫ Objetivos -->
        <fieldset>
          <legend>Objetivos de Composi√ß√£o Corporal</legend>
          <label for="obj-manter">
            <input
              type="radio"
              id="obj-manter"
              name="objetivo_composicao"
              value="manter"
            />
            Manter o Peso
          </label>
          <label for="obj-emagrecer">
            <input
              type="radio"
              id="obj-emagrecer"
              name="objetivo_composicao"
              value="emagrecer"
            />
            Perder Peso (Emagrecer)
          </label>
          <label for="obj-hipertrofia">
            <input
              type="radio"
              id="obj-hipertrofia"
              name="objetivo_composicao"
              value="hipertrofia"
            />
            Ganhar Massa Muscular (Hipertrofia)
          </label>
          <label for="obj-aumentar">
            <input
              type="radio"
              id="obj-aumentar"
              name="objetivo_composicao"
              value="aumentar"
            />
            Aumentar o Peso (de forma saud√°vel)
          </label>
        </fieldset>

        <fieldset>
          <legend>Objetivos de Performance</legend>
          <p>Voc√™ pode selecionar mais de um, se desejar:</p>
          <label for="obj-forca">
            <input
              type="checkbox"
              id="obj-forca"
              name="objetivos[]"
              value="forca"
            />
            Aumentar a For√ßa
          </label>
          <label for="obj-endurance">
            <input
              type="checkbox"
              id="obj-endurance"
              name="objetivos[]"
              value="endurance"
            />
            Aumentar a Resist√™ncia (Endurance)
          </label>
          <label for="obj-velocidade">
            <input
              type="checkbox"
              id="obj-velocidade"
              name="objetivos[]"
              value="velocidade"
            />
            Aumentar a Velocidade
          </label>
          <label for="obj-flexibilidade">
            <input
              type="checkbox"
              id="obj-flexibilidade"
              name="objetivos[]"
              value="flexibilidade"
            />
            Melhorar a Flexibilidade
          </label>
        </fieldset>

        <!-- Informa√ß√µes Adicionais -->
        <fieldset>
          <legend>Informa√ß√µes Adicionais (Opcional)</legend>
          <label for="saude">Hist√≥rico de sa√∫de:</label>
          <textarea id="saude" name="saude" rows="4"></textarea>

          <label for="restricoes">Restri√ß√µes alimentares / Alergias:</label>
          <textarea id="restricoes" name="restricoes" rows="4"></textarea>

          <label for="preferencias">Prefer√™ncias alimentares:</label>
          <textarea id="preferencias" name="preferencias" rows="4"></textarea>
        </fieldset>

        <!-- Sele√ß√£o da F√≥rmula -->
        <fieldset class="formula-selection">
          <legend>Escolha a F√≥rmula de C√°lculo</legend>
          <p>Selecione uma op√ß√£o:</p>
          <div class="formula-options">
            <label for="formula-recomendada">
              <input
                type="radio"
                id="formula-recomendada"
                name="formula"
                value="recomendada"
                checked
                required
              />
              F√≥rmula Recomendada
            </label>
            <label for="formula-katch-mcardle">
              <input
                type="radio"
                id="formula-katch-mcardle"
                name="formula"
                value="katch-mcardle"
              />
              Katch-McArdle
            </label>
            <label for="formula-mifflin-st-jeor">
              <input
                type="radio"
                id="formula-mifflin-st-jeor"
                name="formula"
                value="mifflin-st-jeor"
              />
              Mifflin-St Jeor
            </label>
            <label for="formula-harris-benedict">
              <input
                type="radio"
                id="formula-harris-benedict"
                name="formula"
                value="harris-benedict"
              />
              Harris-Benedict
            </label>
            <label for="formula-oms">
              <input type="radio" id="formula-oms" name="formula" value="oms" />
              OMS
            </label>
            <label for="formula-owen">
              <input
                type="radio"
                id="formula-owen"
                name="formula"
                value="owen"
              />
              Owen
            </label>
            <label for="formula-henry">
              <input
                type="radio"
                id="formula-henry"
                name="formula"
                value="henry"
              />
              Henry
            </label>
          </div>
        </fieldset>

        <!-- Bot√£o de Envio -->
        <button type="submit" class="submit-btn">Calcular</button>
      </form>
    </main>

    <script src="modals.js"></script>
    <script src="biotipo.js"></script>
    <script src="validacao.js"></script>
    <script>
      // Valida√ß√£o do campo de altura
      const alturaInput = document.getElementById("altura");
      const alturaError = document.getElementById("altura-error");

      alturaInput.addEventListener("input", () => {
        const value = alturaInput.value;
        // Verifica se o valor cont√©m v√≠rgula, ponto ou n√£o √© um n√∫mero inteiro
        if (
          value.includes(",") ||
          value.includes(".") ||
          isNaN(value) ||
          value % 1 !== 0
        ) {
          alturaError.style.display = "block";
          alturaInput.setCustomValidity(
            "Por favor, insira a altura em cent√≠metros (ex.: 170)."
          );
        } else {
          alturaError.style.display = "none";
          alturaInput.setCustomValidity("");
        }
      });
    </script>
  </body>
</html>
